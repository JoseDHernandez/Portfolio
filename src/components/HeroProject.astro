---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
interface Props {
  Description: string;
  Technologies: string[];
  Github_link?: string;
  Demo_link?: string;
  License: string;
  Img: ImageMetadata;
  Title: string;
  Release: Date;
  Update?: Date;
  Authors?: string;
}
const {
  Description,
  Technologies,
  Github_link,
  Demo_link,
  License,
  Img,
  Title,
  Release,
  Update,
  Authors,
} = Astro.props;
import GetLicense from "./GetLicense";

const getDate = (d: Date) =>
  new Date(d).toLocaleDateString("es-CO", {
    year: "numeric",
    month: "long",
    day: "numeric",
    timeZone: "America/Bogota",
  });
---

<section>
  <div class="hero" transition:name={`project-bg-${Title}`}>
    <div class="hero--information">
      <div transition:name={`project-desc-${Title}`}>
        {Description.split("\n").map((parrafo) => <p>{parrafo}</p>)}
      </div>
      <p>
        <strong>Fecha:</strong>
        {getDate(Release)}
        {
          Update && (
            <span>
              {" "}
              -{" " + getDate(Update)}
              <sup
                title="Fecha de la ultima actualización"
                class="hero--annotation"
              >
                *
              </sup>
            </span>
          )
        }
      </p>
      <div class="hero--buttons">
        {
          Github_link && (
            <a
              class="button-text-icon-background-primary"
              href={Github_link}
              rel="external noopener noreferrer"
              target="_blank"
              aria-label="Ir al repositorio en GitHub"
            >
              Repositorio <Icon name="github_l" />
            </a>
          )
        }
        {
          Demo_link && (
            <a
              class="button-text-icon-background-accent"
              href={Demo_link}
              rel="external noopener noreferrer"
              target="_blank"
              aria-label="Ir a la página de demostración del proyecto"
            >
              Demostración <Icon name="play" />
            </a>
          )
        }
      </div>
    </div>
    <Image
      fetchpriority="high"
      class="hero--image"
      loading="eager"
      src={Img}
      alt={`Imagen de portada del proyecto ${Title}`}
      widths={[400, 700, Img.width]}
      sizes=`(max-width: 480px) 400px,
         (max-width: 1280px) 700px,
         800px`
      transition:name={`project-${Title}`}
    />
  </div>
  <div>
    <h2 class="text-fluid-4">Infomación adicional</h2>
    <strong class="text-">Tecnologías utilizadas</strong>
    <ul class="hero--technologies">
      {
        Technologies.sort().map((tech) => (
          <li aria-label={`Tecnología: ${tech}`} title={tech}>
            <Icon name={`technologies/${tech}`} size={50} />
          </li>
        ))
      }
    </ul>

    <p>
      <strong>Licencia:</strong>
      <GetLicense
        License={License}
        Work_link={Github_link}
        Title={Title}
        Year={new Date(Release).getFullYear()}
        Authors={Authors}
      />
    </p>
  </div>
</section>

<style lang="scss">
  @use "../styles/components/_heroProject.scss";
</style>
